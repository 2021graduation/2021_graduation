지오코딩이란 주소를 GPS로 바꾸는 기능이다.

우리의 목표: 재난문자에서 ( ) 안 워딩들을 지오코딩해서 GPS를 받아오고 관리하는 것.


생각한 방안
Q1. 백그라운드에서 재난문자를 요청하고, 지오코딩이 가능한가?
A1. 아직 알 수 없음.


Q2. 만약 가능하다면 어떻게 받고 관리할 수 있는가?
A2. 사용자 방문위치를 지오코딩함 => 이 말인 즉, 사용자 기기에 저장된 SQLite DB에서 뽑아낸 것을 지오코딩한다는 말이 됨. (O)

예제. 이용자 최지혁 군은 4월 13일 오늘 다음과 같은 장소가 DB에 저장되었음.

2021년04월13일
- 대한민국	부산광역시	사하구	|	다대동 다송로36
- 대한민국	충청북도		진천군	|	진천읍 중앙서3길 6
- 대한민국	경상남도		창원시	|	의창구 봉림동 창원대학로20
- 대한민국	인천광역시	계양구	|	계산4동 장제로 822

공통점이 보이는가? 다음 주소들은 (대한민국) OOO OOO의 양식을 가지고 있으며
OOO OOO은 csv파일에서도 알 수 있듯이 locale_id 가 구분되는 주소들임.
따라서, 사용자 기기에 저장된 SQLite DB에서 뽑아낸 주소들로 locale_id를 뽑아낼 수 있음.
(되는 지 확실치 않음 현재 뇌피셜로 그림만 그려둔 상태임)


SQL DB에서 뽑아낸 주소들로 location_id를 뽑아내는 방법
- 부산광역시 사하구

부산광역시 사하구이면)

	-> 부산광역시 사하구 랑 부산광역시 전체라는 키워드를 equlas 비교해서, 재난문자를 조회 
	-> 부산광역시 사하구 문자랑 부산광역시 전체 문자 두개 다 조회가 가능하다
	-> 문자 하나가 검색될때마다 ( ) 안 워딩을 지오코딩하고 결과값이 있으면)
		-> GPS와 재난문자 내용 전체를 DB에 저장



1. 이렇게 뽑아낸 locale_id로 재난문자를 조회함.
2. 재난문자에서 ( ) 안 워딩들을 지오코딩하고 결과값이 있으면 GPS와 재난문자 내용 전체를 DB에 저장함. (이 DB를 지오DB라 칭함)
3. 사용자 동선과 지오DB 안의 GPS들을 각각 거리비교해서 일정 거리 이내 경고 표시와 함께 경고마커를 띄우고 해당 마커 클릭시 저장했던 재난문자 내용 출력

=================================
++ 2021.04.16

재난문자에서 ( ) 안 워딩들을 지오코딩하고 결과값을 뽑아내는데 까지 성공했음. 결과값 확인 끝.
( )안에 주소 형태의 워딩이 있다면 뽑아냄.

3번기능 구현이 되면 사용자 동선과 지오 DB안의 GPS들을 거리비교해서 일정 거리 이내 경고 표시를 주는 기능이 실행될 것임.

이제 고민해야할 것

- Service 단 -
ⓐ 재난문자는 어떠한 간격으로 받아올 것인가? 사용자 위치처럼 10분에 한번씩 요청? 아니면 시간 단위나 하루 단위 등으로 기간을 넓게 잡고 한번에 정산?

ⓑ 지오DB에 대한 관리는 어떻게 할 것인가? 사용자 위치 DB는 데이터의 반복 저장을 피하는 형태로 설계했고 사용자에게 직접 테이블 삭제에 대한 기능도 제공해서 어느정도 관리가 되는 상황이지만, 지오 DB는 일단 주소 형태의 워딩이면 재난문자에서 가져오기 때문에 반복 데이터에 대한 저장, 추가적인 데이터가 발생했을 때 상황이 정리되지 않았음.

ⓒ 3번기능 구현을 위해서는 사용자 동선과 지오 DB안의 GPS거리들을 distance() 함수로 비교해야함. 이를 어떻게 비교할 것인가? 사용자 위치테이블을 모두 훑어보면서 일일이 distance()함수로 비교할것인가? 

ⓓ 경고횟수에 대한 고민도 필요. 가령, 사용자 자택과 코로나 발생지가 일정 거리 이내라서 그간 사용자가 저장해놨던 테이블 갯수만큼 경고가 감지되는 불필요한 알림이 연출될 수 있음. 이것에 대한 고민 필요.


- 재난문자 제공 기능 -
ⓐ 현재는 재난문자를 단순히 1000개까지 가져와서 보여주고 있다. 하지만 사용자가 추가적으로 과거의 재난문자를 더 보고 싶어한다면 방법이 있는가? 가령, 2000개 3000개에 대한 요청까지 가능한가?

ⓑ 현재 구현된 재난문자를 분류해내는 로직이 코드적으로 볼때 너무 복잡하거나 무거워지진 않는가? 기기에 직접 실험해봐야 좀 더 와닿을 문제로 추정됨.

ⓒ 사용자가 다녀갔던 위치 포함 사용자 위치 중심으로 재난 문자 제공이 가능한가? 가능하다면 어떻게 할 것인가?

ⓓ 위 3가지 문제를 해결했다면, 시도별 확진자 수에 대한 데이터 시각화에 대한 고민 필요.